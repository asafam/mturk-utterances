(this.webpackJsonpmturk=this.webpackJsonpmturk||[]).push([[3],{13:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?r(e):t}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=o(e);if(t){var s=o(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return h(this,a)}}a.r(t);var b=a(0),m=a.n(b),j=(a(14),a(1)),x=function(e){l(a,e);var t=u(a);function a(e){var s;return n(this,a),(s=t.call(this,e)).state={},s.handleSubmit=s.handleSubmit.bind(r(s)),s.handleClear=s.handleClear.bind(r(s)),s.handleTextAreaChange=s.handleTextAreaChange.bind(r(s)),s}return c(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.validate(),a=t.valid,n=t.errorMessage;a?this.props.onSubmit():this.setState({valid:a,errorMessage:n})}},{key:"handleTextAreaChange",value:function(e){var t=this.props,a=t.maxLength,n=t.onParaphrase,s=this.state.newText,c=e.target.value;c=c.length<=a?c:s||"",this.setState({newText:c,errorMessage:null,valid:null}),n(c)}},{key:"handleClear",value:function(e){e.preventDefault(),this.setState({newText:""})}},{key:"validate",value:function(){var e=this.props,t=e.text,a=e.blacklist,n=e.maxLength,s=e.minLength,c=this.state.newText,r=!!c&&t.toLowerCase().trim()!==c.toLowerCase().trim(),i=!!c&&c.length<=n,l=!!c&&c.length>s,o=!!c&&a.filter((function(e){return c.toLowerCase().includes(e.toLowerCase())})),d=0===o.length,h=r&&i&&l&&d,u=null;return l?i?r?d||(u="The new text cannot include the words: ".concat(o.join(", "),".")):u="The new text should be different from the original sentence.":u="The new text exceeds the maximum allowed length of ".concat(n," characters."):u="Please be more creative.",{valid:h,errorMessage:u}}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.blacklist,n=e.maxLength,s=this.state,c=s.newText,r=s.valid,i=s.errorMessage;return Object(j.jsxs)("div",{className:"paraphrase",children:[Object(j.jsx)("div",{className:"row mt-3 mb-3",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("h1",{className:"text-center",children:"Rephrase a sentence"})})}),Object(j.jsxs)("div",{className:"instructions row mb-3",children:[Object(j.jsx)("div",{className:"col-md-2 col-sm",children:Object(j.jsx)("h5",{children:"Your task"})}),Object(j.jsx)("div",{className:"col-md-10 col-sm",children:Object(j.jsxs)("p",{children:["You are asked to paraphrase the following original text ",Object(j.jsx)("span",{className:"bold",children:"without"})," using the words: ",Object(j.jsx)("span",{className:"text text-red bold",children:a.join(", ")}),". The new sentence should preserve the meanings of the original text."]})})]}),Object(j.jsxs)("div",{className:"original-text row mb-3",children:[Object(j.jsx)("div",{className:"col-md-2 col-sm",children:Object(j.jsx)("h5",{children:"Original text"})}),Object(j.jsx)("div",{className:"col-md-10 col-sm",children:Object(j.jsx)("div",{className:"text",children:t})})]}),Object(j.jsx)("div",{className:"paraphrase-text mb-3",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-2 col-sm",children:Object(j.jsx)("h5",{children:"Paraphrase here"})}),Object(j.jsx)("div",{className:"col-sm col-md-8",children:Object(j.jsx)("div",{className:"card mt-4",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("form",{className:"g-3 needs-validation pt-1",onSubmit:this.handleSubmit,noValidate:!0,children:Object(j.jsxs)("div",{className:"has-validation",children:[Object(j.jsx)("label",{className:"form-label",style:{display:"none"},children:"Rephrase the sentence"}),Object(j.jsx)("textarea",{className:"intent-textarea text form-control mb-3 ".concat(!0===r?"is-valid":!1===r&&"is-invalid"),rows:"5",value:c,type:"text",id:"text","aria-describedby":"help",onChange:this.handleTextAreaChange,placeholder:"Type your new sentence here...",required:!0}),Object(j.jsxs)("div",{className:"p-1 m-1",children:[Object(j.jsx)("span",{className:(c||"").length>=n?"text-danger":"",children:(c||"").length})," / ",n]}),Object(j.jsx)("div",{className:"invalid-feedback",children:i})]})})})})})})})]})}),Object(j.jsx)("div",{className:"row mb-3",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"actions bottom mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(j.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClear,children:[Object(j.jsx)("i",{className:"bi bi-x-lg"}),"Clear"]}),Object(j.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleSubmit,children:[Object(j.jsx)("i",{className:"bi bi-check-lg"}),"Submit"]})]})})})]})}}]),a}(m.a.Component),p=function(e){l(a,e);var t=u(a);function a(e){var s;return n(this,a),(s=t.call(this,e)).state={feedback:""},s.handleSubmit=s.handleSubmit.bind(r(s)),s.handleClickBack=s.handleClickBack.bind(r(s)),s.handleTextAreaChange=s.handleTextAreaChange.bind(r(s)),s}return c(a,[{key:"handleTextAreaChange",value:function(e){var t=this.props.onFeedbackChange,a=e.target.value;this.setState({feedback:a}),t&&t(a)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.feedback;this.props.onSubmit(t)}},{key:"handleClickBack",value:function(e){e.preventDefault(),this.props.onClickBack()}},{key:"render",value:function(){var e=this.state.feedback;return Object(j.jsxs)("div",{className:"thank-you",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("h2",{className:"text-muted text-center mb-3",children:"Thank You."})})}),Object(j.jsx)("div",{className:"row mt-3 mb-3",children:Object(j.jsx)("div",{className:"offset-md-3 col-md-6 col-sm",children:Object(j.jsxs)("div",{className:"card mt-4",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsxs)("h4",{className:"text-center",children:[Object(j.jsx)("span",{className:"intent-icon bi bi-megaphone"}),"Have any feedback?"]})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("form",{className:"g-3 needs-validation pt-1",onSubmit:this.handleSubmit,noValidate:!0,children:Object(j.jsx)("div",{className:"has-validation",children:Object(j.jsx)("textarea",{className:"feedback-textarea form-control mb-3",rows:"3",value:e,type:"text",id:"feedback-text","aria-describedby":"help",onChange:this.handleTextAreaChange,placeholder:"Enter your feedback here...",required:!0})})})})})})]})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickBack,children:Object(j.jsx)("i",{className:"bi bi-chevron-left"})}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleSubmit,children:"Finish"})]})})})]})}}]),a}(m.a.Component),f="paraphrase",v="thankYou",k=function(e){l(a,e);var t=u(a);function a(e){var s;return n(this,a),(s=t.call(this,e)).state={step:f},s.handleFeedbackChange=s.handleFeedbackChange.bind(r(s)),s.handleParaphrase=s.handleParaphrase.bind(r(s)),s.handleClickNext=s.handleClickNext.bind(r(s)),s.handleClickBack=s.handleClickBack.bind(r(s)),s}return c(a,[{key:"handleClickNext",value:function(){var e=this.state.step;e===f?this.setState({step:v}):e===v&&this.submitToMTurk()}},{key:"handleClickBack",value:function(){this.state.step===v&&this.setState({step:f})}},{key:"handleParaphrase",value:function(e){this.setState({newUtterance:e})}},{key:"handleFeedbackChange",value:function(e){this.setState({feedback:e})}},{key:"submitToMTurk",value:function(){var e=this.props,t=e.id,a=e.utterance,n=this.state,s=n.newUtterance,c=n.feedback,r=[{id:t,utterance:a,newUtterance:s}];document.querySelector("crowd-form").onsubmit=function(){document.getElementById("worker-responses")&&(document.getElementById("worker-responses").value=JSON.stringify(r),document.getElementById("worker-feedback").value=c)},document.querySelector("crowd-form").submit()}},{key:"getDisplayedScreen",value:function(){var e=this.props,t=e.utterance,a=e.blacklist,n=e.maxLength,s=e.minLength,c=this.state.step;return c===f?Object(j.jsx)(x,{text:t,blacklist:a,maxLength:n,minLength:s,onParaphrase:this.handleParaphrase,onSubmit:this.handleClickNext}):c===v?Object(j.jsx)(p,{onFeedbackChange:this.handleFeedbackChange,onSubmit:this.handleClickNext,onClickBack:this.handleClickBack}):void 0}},{key:"render",value:function(){var e=this.getDisplayedScreen();return Object(j.jsx)("div",{className:"app",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("main",{children:e})})})}}]),a}(m.a.Component),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",a=document.getElementById(t).getAttribute(e);return a&&!a.startsWith("${")?a:null},y=g("data-id"),O=g("data-utterance"),N=g("data-blacklist")?g("data-blacklist").split(",").map((function(e){return e.trim()})):["<any word is valid>"],w=g("data-max-length")&&parseInt(g("data-max-length"))||180,C=g("data-min-length")&&parseInt(g("data-max-length"))||10;t.default=function(){return Object(j.jsx)("div",{className:"utterances",children:Object(j.jsx)(k,{id:y,utterance:O,blacklist:N,maxLength:w,minLength:C})})}},14:function(e,t,a){}}]);
//# sourceMappingURL=3.c6d93815.chunk.js.map