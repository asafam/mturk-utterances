(this.webpackJsonpmturk=this.webpackJsonpmturk||[]).push([[0],{58:function(e,t,s){},60:function(e,t,s){},62:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(17),i=s.n(a),l=(s(56),s(57),s(58),s(2)),r=s(5),o=s(6),d=s(3),h=s(10),j=s(9),b=s(51),m=(s(60),s(0)),x=function(e){var t=e.onClickSkip;return Object(m.jsx)("div",{className:"home",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"header text-center",children:[Object(m.jsx)("h1",{children:"Virtual Assistant++"}),Object(m.jsx)("h3",{children:Object(m.jsx)("span",{className:"bi bi-mic"})}),Object(m.jsxs)("p",{children:["Your goal in this task is to write ",Object(m.jsx)("span",{className:"purple",children:"Complex Instructions"})," to the perfect virtual assistant (better than Google assistant, Alexa or Siri)"]})]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("span",{className:"intent-icon bi bi-stars"})})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"example vertical-center-container",children:Object(m.jsx)("div",{className:"vertical-center",children:Object(m.jsx)("div",{className:"intent-textarea text-center",children:Object(m.jsx)(b.a,{steps:["Unless there is traffic on my route home, text Mom I'll be there in 10 minutes",5e3],loop:1/0,wrapper:"p"})})})})})})})]})})}),Object(m.jsx)("div",{className:"row mb-5",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:t,children:"Start"})})})})]})})},u=s(19),p=(s(62),function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.onClickBack,s=e.onClickNext;return Object(m.jsx)("div",{className:"instructions help",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"row mb-5",children:Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)("h1",{children:"Instructions"}),Object(m.jsx)("h4",{children:"Please write complex instructions that you would ask an ideal virtual assistant."})]})}),Object(m.jsxs)("div",{className:"row mb-5",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction defintion",children:[Object(m.jsxs)("h3",{children:[Object(m.jsx)("span",{className:"text-purple",children:"Complex Instuctions"})," are"]}),Object(m.jsx)("div",{className:"instruction-body",children:Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:["Made of ",Object(m.jsx)("span",{className:"text-purple",children:"multiple"})," simple instructions. A simple instruction performs a single action or query you'd ask a virtual assistance (e.g., send text message or check the weather)."]}),Object(m.jsxs)("li",{children:["Executed in a specific ",Object(m.jsx)("span",{className:"text-purple",children:"order"}),": in sequences, upon conditions, or run in loops."]}),Object(m.jsx)("li",{children:"Ideally, we want instructions that will require a human more than a single mobile app action or a Goole search to complete"})]})})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"instruction examples",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)(u.a,{variant:"dark",interval:"10000",children:[Object(m.jsx)(u.a.Item,{className:"instruction-example positive-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-green bi bi-check"}),"Archive every unread email from Amazon and Zillow in my inbox"]}),Object(m.jsx)("div",{className:"example-caption text-green",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Is complex"})," since it incorporates 2 simple virtual assistant instructions:",Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Archive every unread email from Amazon"}),Object(m.jsx)("li",{children:"Archive every unread email from Zillow"})]})]})})]})})}),Object(m.jsx)(u.a.Item,{className:"instruction-example positive-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-green bi bi-check"}),"Get directions to the Eagles game if they play home today"]}),Object(m.jsx)("div",{className:"example-caption text-green",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Is complex:"}),Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Check the Eagles games schedule whether they play home today"}),Object(m.jsx)("li",{children:"If the answer to (1) is positive, then get directions to the team's game"}),Object(m.jsx)("li",{children:"To perform (2), it should also get the location of the Eagles game (i.e., the actual stadium address)"})]})]})})]})})}),Object(m.jsx)(u.a.Item,{className:"instruction-example negative-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-red bi bi-x"}),"Remind me to submit my essay at 11:00pm"]}),Object(m.jsx)("div",{className:"example-caption text-red",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Is not complex"}),". This is a simple instruction that performs a single action"]})})]})})}),Object(m.jsx)(u.a.Item,{className:"instruction-example negative-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-red bi bi-x"}),"Tell me if tomorrow is Groundhog Day"]}),Object(m.jsx)("div",{className:"example-caption text-red",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Is not complex"}),". This is a simple instruction that performs a single action"]})})]})})})]})})})})]}),Object(m.jsx)("div",{className:"row mb-5",children:Object(m.jsx)("div",{className:"col-8",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Interesting!"}),Object(m.jsxs)("div",{className:"instruction-body",children:[Object(m.jsx)("p",{children:"Think about real-life scenarios where you could use this ideal virtual assistance in your favor."}),Object(m.jsx)("p",{children:"Don't try to \u201ctest\u201d the system\u2019s intelligence, but rather try to come up with information-dependant instructions for actual real-world needs and scenarios."})]})]})})}),Object(m.jsxs)("div",{className:"row mb-5",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Diverse"}),Object(m.jsxs)("div",{className:"instruction-body",children:[Object(m.jsx)("p",{children:"Think of instructions that express commands and queries in different domains. Your final complex instruction can also be comprised of different domains."}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"text-purple bold",children:"Commands"})," are instructions ordering something to be done"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"text-purple bold",children:"Queries"})," are information-seeking instructions. Feel free to include  ",Object(m.jsx)("span",{className:"text-purple",children:"specifics"}),' (e.g., "the yellow ...", "every", "earliest", etc), ',Object(m.jsx)("span",{className:"text-purple",children:"conditions"})," or ",Object(m.jsx)("span",{className:"text-purple",children:"aggregation operations"})," (count, sum, min, max, average), whenever relevant"]})]})]})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsx)("div",{className:"vertical-center",children:Object(m.jsxs)("div",{className:"domains",children:[Object(m.jsx)("p",{children:"Think about complex commands in the following domains:"}),Object(m.jsxs)("div",{className:"utterance-text",children:[Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-cloud-sun"}),"Weather information,"]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-truck"}),"travel and navigation, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-envelope"}),"mail, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-geo"}),"events information, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-google"}),"general knowledge, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-cart"}),"shopping, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-chat"}),"messaging, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-bookmark"}),"reminders, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-calendar-date"}),"schedule, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-house"}),"smart home, "]}),Object(m.jsxs)("div",{className:"domain-example",children:[Object(m.jsx)("span",{className:"bi bi-heart-pulse"}),"health and nutrition, and more apps"]})]})]})})})})]}),Object(m.jsxs)("div",{className:"row mb-5",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Can be done by a virtual assistant"}),Object(m.jsx)("p",{className:"instruction-body",children:"Think of instructions that are hard, but are possible for a virtual assistant to perform. As a rule of thumb, if a virtual assistant (like Siri or Alexa) can do each of the simple instructions that make the complex instruction, then it is valid."})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsx)("div",{className:"vertical-center",children:Object(m.jsxs)("div",{className:"instruction-example",children:[Object(m.jsxs)("div",{className:"example-title utterance-text",children:[Object(m.jsx)("span",{className:"example-icon bi bi-close"}),"Get me the phone number of the most popular nanny in my area that is available tonight"]}),Object(m.jsx)("div",{className:"example-caption text-red",children:"This instruction cannot be done as the data required to complete it is not available - one may argue that there is no reliable source of the most popular nannies. Even if there was a reliable source, it is not easily accessible for virutal assistants."})]})})})})]}),Object(m.jsxs)("div",{className:"row mb-5 ambiguity",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Unambiguous"}),Object(m.jsx)("p",{className:"instruction-body",children:"A person can clearly understand the intents within the instruction."})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"ambiguity-examples",children:Object(m.jsxs)(u.a,{variant:"dark",interval:"10000",children:[Object(m.jsx)(u.a.Item,{className:"instruction-example positive-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-red bi bi-x"}),"If it is safe to travel to Barcelona then book me a ticket for next week"]}),Object(m.jsx)("div",{className:"example-caption text-red",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Ambiguous"})," because ",Object(m.jsx)("span",{className:"utterance-text",children:'"safe"'})," is not clearly defined. Safe to walk? Safe from health or crime perspectives? Safe for elder people?"]})})]})})}),Object(m.jsx)(u.a.Item,{className:"instruction-example positive-example",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"example-title utterance-text text-center",children:[Object(m.jsx)("span",{className:"text-red bi bi-x"}),"Remind me to feed the cat at 8am tomorrow in case I have evening meetings "]}),Object(m.jsx)("div",{className:"example-caption text-red",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bold",children:"Ambiguous"})," because ",Object(m.jsx)("span",{className:"utterance-text",children:'"8am tomorrow"'})," can be understood as the time to feed the cat, but it can also be understood as the time to switch the reminder on."]})})]})})})]})})})]}),t&&s&&Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:t,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:s,children:Object(m.jsx)("i",{className:"bi bi-chevron-right"})})]})})})]})})}}]),s}(c.a.Component)),O=s(29),v=s(74),N=function(e){return Object(m.jsxs)(O.a,Object(l.a)(Object(l.a)({},e),{},{size:"xl","aria-labelledby":"contained-modal-title-vcenter",animation:!1,centered:!0,children:[Object(m.jsx)(O.a.Header,{children:Object(m.jsx)(O.a.Title,{id:"contained-modal-title-vcenter",children:Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("i",{className:"bi bi-life-preserver"})})})}),Object(m.jsx)(O.a.Body,{children:Object(m.jsx)("div",{children:e.children})}),Object(m.jsx)(O.a.Footer,{children:Object(m.jsx)(v.a,{onClick:e.onHide,children:"Close"})})]}))},f=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.show,s=e.onHide,n=e.children;return Object(m.jsx)("div",{className:"help",children:Object(m.jsx)(N,{show:t,onHide:s,children:n})})}}]),s}(c.a.Component),k=(s(66),function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;Object(r.a)(this,s),n=t.call(this,e);var c=e.utterance,a=e.context,i=e.contexts,l=e.intents;return n.state={utterance:c,context:a||n.getRandomContext(i),domains:l},n.handleClickNext=n.handleClickNext.bind(Object(d.a)(n)),n.handleClickHelp=n.handleClickHelp.bind(Object(d.a)(n)),n.handleTextAreaChange=n.handleTextAreaChange.bind(Object(d.a)(n)),n.handleSwitchContextClick=n.handleSwitchContextClick.bind(Object(d.a)(n)),n}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e,t){if(e.utterance!==this.props.utterance){var s=this.props.utterance;s=s||"",this.setState({utterance:s})}}},{key:"handleTextAreaChange",value:function(e){var t=this.props,s=t.index,n=t.utteranceLimit,c=t.disableTextOverflow,a=t.onUtteranceChange,i=this.state.context,l=e.target.value,r=!c||l.length<=n?l:this.state.utterance||"";this.setState({utterance:r}),a&&a(s,l,i)}},{key:"handleSwitchContextClick",value:function(){var e=this.props.contexts,t=this.getRandomContext(e);this.setState({context:t})}},{key:"getRandomContext",value:function(e){var t=e[Math.floor(Math.random()*e.length)],s=this.props.onContextChange;return s&&s(t),t}},{key:"isUtteranceValid",value:function(){var e=this.props,t=(e.intents,e.conjunctionWords),s=this.state.utterance,n=t.reduce((function(e,t){return e.concat(t.verification||[t.display])}),[]),c=Boolean(s&&s.trim().length>0),a=Boolean(n&&n.length>0),i=c&&a&&n.filter((function(e){return-1!==s.toLowerCase().indexOf(e.trim().toLowerCase())})).length>0;return!c||s.split(" ").length<=2?(this.setState({valid:!1,errorMessage:Object(m.jsx)("span",{children:"Please be more creative."})}),!1):a&&!i?(this.setState({valid:!1,errorMessage:Object(m.jsxs)("span",{children:["Please use at least 1 of the following word: ",Object(m.jsx)("strong",{children:t.map((function(e){return e.display})).join(", ")}),"."]})}),!1):s.indexOf("?")>=0&&s.indexOf("?")<.5*s.length||s.trim().split("?").filter((function(e){return e.length>0})).length>1?(this.setState({valid:!1,errorMessage:Object(m.jsxs)("span",{children:["Please try to phrase the utterance as a ",Object(m.jsx)("strong",{children:"single"})," request (and not in multiple phrases)."]})}),!1):(this.setState({valid:!0}),!0)}},{key:"handleClickNext",value:function(e){e.preventDefault(),this.isUtteranceValid()&&this.props.onClickNext()}},{key:"handleClickHelp",value:function(e){this.setState({showHelp:!0})}},{key:"render",value:function(){var e=this,t=this.props,s=t.index,n=t.maxUtterances,c=t.utteranceLimit,a=t.onClickBack,i=this.state,l=i.domains,r=i.utterance,o=i.valid,d=i.errorMessage,h=i.showHelp,j=["Write a complex utterance","Write one more complex utterance","Write another complex utterance","Write one last complex utterance"],b=j[Math.min(s,j.length-1)];return h?Object(m.jsx)(f,{show:h,onHide:function(){return e.setState({showHelp:!1})},children:Object(m.jsx)(p,{})}):Object(m.jsxs)("div",{className:"utterance px-4 py-5 my-5",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("h1",{className:"instruction-header",children:[b," ",Object(m.jsxs)("span",{className:"text-purple",children:["(",s+1," / ",n,")"]})]})})}),Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"bd-callout intents-container",children:[Object(m.jsxs)("p",{className:"instruction-body",children:["Imagine you have the following ",Object(m.jsx)("span",{className:"text-purple bold",children:"apps"})," on your mobile device."]}),Object(m.jsx)("div",{className:"domains",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:l.slice(0,6).map((function(e,t){return Object(m.jsx)("tr",{className:"utterance-text","data-idx":t,children:Object(m.jsxs)("td",{children:[Object(m.jsx)("span",{className:"intent-icon bi bi-".concat(e.icon)}),Object(m.jsx)("span",{children:e.name})]})},t)}))})})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:l.slice(6).map((function(e,t){return Object(m.jsx)("tr",{className:"utterance-text","data-idx":t,children:Object(m.jsxs)("td",{children:[Object(m.jsx)("span",{className:"intent-icon bi bi-".concat(e.icon)}),Object(m.jsx)("span",{children:e.name})]})},t)}))})})})]})}),Object(m.jsxs)("div",{className:"final-instructions",children:[Object(m.jsxs)("p",{children:["Please write a ",Object(m.jsx)("span",{className:"text-purple bold",children:"complex utterance"})," to the ideal virtual assistant, which uses queries and commands in the context of these apps."]}),Object(m.jsxs)("ol",{children:[Object(m.jsxs)("li",{children:["A complex utterance is likely to express queries and commands in ",Object(m.jsx)("span",{className:"text-purple",children:"at least 2 of the apps"})," or in ",Object(m.jsx)("span",{className:"text-purple",children:"the same app at least twice"})]}),Object(m.jsxs)("li",{children:["Please ",Object(m.jsx)("span",{className:"text-purple",children:"avoid greeting and politeness"})," (For example, avoid saying ",Object(m.jsx)("span",{className:"utterance-text",children:"Hello"}),"). Just get straight to the point"]})]}),Object(m.jsx)("p",{className:"comment",children:"Click Help to see the intructions and examples"})]})]})})}),Object(m.jsx)("div",{className:"row mt-3 mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card mt-4",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsxs)("h3",{className:"text-center",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-keyboard"}),"Write here"]})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("form",{className:"g-3 needs-validation pt-1",onSubmit:this.handleSubmit,noValidate:!0,children:Object(m.jsxs)("div",{className:"has-validation",children:[Object(m.jsx)("label",{className:"form-label",style:{display:"none"},children:"Write a complex utterance"}),Object(m.jsx)("textarea",{className:"intent-textarea utterance-text form-control mb-3 ".concat(!0===o?"is-valid":!1===o&&"is-invalid"),rows:"5",value:r,type:"text",id:"utterance","aria-describedby":"help",onChange:this.handleTextAreaChange,placeholder:"Type your complex utterance here...",required:!0}),Object(m.jsxs)("div",{className:"p-1 m-1",children:[Object(m.jsx)("span",{className:(r||"").length>=c?"text-danger":"",children:(r||"").length})," / ",c]}),Object(m.jsx)("div",{className:"invalid-feedback",children:d})]})})})})})]})})}),Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"actions bottom mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:a,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleClickNext,children:Object(m.jsx)("i",{className:"bi bi-chevron-right"})})]})})})]}),Object(m.jsx)("div",{className:"actions float",children:Object(m.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickHelp,children:[Object(m.jsx)("i",{className:"bi bi-life-preserver"}),"Help"]})})]})}}]),s}(c.a.Component)),g=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.onClickBack,s=e.onClickNext;return Object(m.jsx)("div",{className:"verification help",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Highlight the task"}),Object(m.jsx)("p",{className:"instruction body",children:"You were instructed to use each task at least once but also given the freedome to use every task more than once. Please help us know exactly how many times you used each task in your new sentence. We present a counter next to each task - use it to indicate the number of times each task was used."}),Object(m.jsxs)("p",{children:["In this example, we use the virtual assistance task for ",Object(m.jsx)("span",{className:"text-red",children:"querying the weather"})," twice, and every other task is used once."]})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsxs)("div",{className:"vertical-center",children:[Object(m.jsxs)("div",{className:"intents",children:[Object(m.jsxs)("div",{className:"intent",children:[Object(m.jsxs)("span",{className:"text-red",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-cloud-sun"}),"Will it snow today"]}),Object(m.jsx)("span",{className:"counter bi bi-x",children:"2"})]}),Object(m.jsxs)("div",{className:"intent",children:[Object(m.jsxs)("span",{className:"text-blue",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-bookmark"}),"Set a daily reminder at 6am to exercise"]}),Object(m.jsx)("span",{className:"counter bi bi-x",children:"1"})]}),Object(m.jsxs)("div",{className:"intent",children:[Object(m.jsxs)("span",{className:"text-green",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-alarm"}),"cancel my alarm"]}),Object(m.jsx)("span",{className:"counter bi bi-x",children:"1"})]})]}),Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("span",{className:"intent-icon bi bi-toggles"})})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"intent-textarea",children:["If ",Object(m.jsx)("span",{className:"highlight text-red",children:"it snows today"})," then ",Object(m.jsx)("span",{className:"highlight text-green",children:"cancel my alarm"}),", if ",Object(m.jsx)("span",{className:"highlight text-red",children:"it is sunny"})," ",Object(m.jsxs)("span",{className:"highlight text-blue",children:["set a daily reminder at 6am to exercise",Object(m.jsx)("span",{className:"index",children:"(2)"})]}),"."]})})})})]})]})})})]}),t&&s&&Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:t,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:s,children:Object(m.jsx)("i",{className:"bi bi-check-lg"})})]})})})]})})}}]),s}(c.a.Component),y=(s(67),1),C=2,w=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;Object(r.a)(this,s),n=t.call(this,e);var c=e.utterance,a=e.step,i=e.constraintIntents,l=e.selectedIntents,o=e.selectedConstraints;return n.state={utterance:c,selectedIntents:l||[],selectedConstraints:o||[],step:a||i.length>0&&l&&l.length>0&&C||y},n.handleClickNext=n.handleClickNext.bind(Object(d.a)(n)),n.handleClickBack=n.handleClickBack.bind(Object(d.a)(n)),n.handleClickHelp=n.handleClickHelp.bind(Object(d.a)(n)),n.handleDecrementCounter=n.handleDecrementCounter.bind(Object(d.a)(n)),n.handleIncrementCounter=n.handleIncrementCounter.bind(Object(d.a)(n)),n}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e,t){if(e.utterance!==this.props.utterance){var s=this.props.utterance;this.setState({utterance:s})}}},{key:"handleDecrementCounter",value:function(e){e.preventDefault();var t=this.props,s=t.onSelectIntent,n=t.onSelectConstraint,c=this.state,a=c.step,i=c.selectedIntents,l=c.selectedConstraints,r=parseInt(e.currentTarget.getAttribute("data-index"));if(a===y){var o=i.indexOf(r);-1!==o&&(i.splice(o,1),s(i))}else{var d=l.indexOf(r);-1!==d&&(l.splice(d,1),n(l))}}},{key:"handleIncrementCounter",value:function(e){e.preventDefault();var t=this.props,s=t.onSelectIntent,n=t.onSelectConstraint,c=this.state,a=c.step,i=c.selectedIntents,l=c.selectedConstraints,r=parseInt(e.currentTarget.getAttribute("data-index"));a===y?(i.push(r),s(i)):(l.push(r),n(l))}},{key:"handleClickNext",value:function(e){e.preventDefault();var t=this.props,s=t.constraintIntents,n=(t.minIntents,t.minConstraints),c=t.onClickNext,a=this.state.step,i=this.isValid();if(i&&a===y&&s.length>0)this.setState({step:C,valid:i,errorMessage:null});else if(i)c();else{var l=a===y?"You have to select every tasks at least once. Click back if you need to update your utterance":"You have to select at least ".concat(n," constraints. Click back if you need to update your utterance");this.setState({valid:i,errorMessage:l})}}},{key:"handleClickBack",value:function(e){e.preventDefault();var t=this.props.constraintIntents;this.state.step===C||t&&t.length>0?this.setState({step:y}):(0,this.props.onClickBack)()}},{key:"handleClickHelp",value:function(e){e.preventDefault(),this.setState({showHelp:!0})}},{key:"isValid",value:function(){var e=this.props,t=e.intents,s=e.minIntents,n=e.minConstraints,c=e.softIntentRequirement,a=this.state,i=a.step,l=a.selectedIntents,r=a.selectedConstraints;if(i===y){var o=l&&l.length>=s;return o=o&&(c?l.length>=s:t.every((function(e,t){return l.indexOf(t)>=0})))}return i===C&&(r&&r.length>=n)}},{key:"getInstruction",value:function(){var e=this.props,t=(e.minIntents,e.minConstraints,this.state.step),s=t===y?"Please select the virtual assitance's tasks you used in your utterance":"Please select the virtual assitance's inquiries you used as constraints in your utterance";return Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"",children:s}),Object(m.jsx)("span",{className:"",children:" (You had to use every task. In addition, you are also allowed to use the same one more than once)"}),Object(m.jsx)("span",{className:"",children:":"})]})}},{key:"render",value:function(){var e=this,t=this.props,s=t.intents,n=t.intentIcons,c=t.constraintIntents,a=t.constraintIcons,i=(t.onClickHelp,this.state),l=i.utterance,r=i.errorMessage,o=i.selectedIntents,d=i.selectedConstraints,h=i.step,j=i.showHelp,b=this.isValid(),x=(this.getInstruction(),h===y?s:c),u=new Array(s.length).fill(0).map((function(e,t){return o.filter((function(e){return e===t})).length})),p=new Array((c||[]).length).fill(0).map((function(e,t){return d.filter((function(e){return e===t})).length})),O=h===y?u:p,v=h===y?n:a;return j?Object(m.jsx)(f,{show:j,onHide:function(){return e.setState({showHelp:!1})},children:Object(m.jsx)(g,{})}):Object(m.jsxs)("div",{className:"verification",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col",children:[Object(m.jsxs)("div",{className:"instructions-text",children:[Object(m.jsx)("h1",{children:"Please indicate how many times you used each virtual assitance task in your new sentence"}),Object(m.jsx)("p",{children:"Reminder: In your rewritten sentence you can use some of the tasks multiple times."})]}),Object(m.jsx)("div",{className:"user-utterance intent text-center",children:Object(m.jsxs)("p",{children:['"',l,'"']})})]})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card mt-4",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("span",{className:"intent-icon bi bi-toggles"})})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"tasks-verification row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"bd-callout",children:[x.map((function(t,s){return Object(m.jsxs)("div",{className:"form-check pt-1 pb-1 mt-1 mb-1 intent selection ".concat(O[s]>0?"selected":""),"data-index":s,children:[Object(m.jsx)("div",{className:"counter-form",children:Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("span",{className:"input-group-btn",children:Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-number",disabled:0===O[s],"data-type":"minus","data-index":s,onClick:e.handleDecrementCounter,children:Object(m.jsx)("span",{className:"bi bi-dash"})})}),Object(m.jsx)("input",{type:"text",name:"quant[1]",className:"form-control input-number",value:O[s],min:"1",max:"10",readOnly:!0}),Object(m.jsx)("span",{className:"input-group-btn",children:Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-number","data-type":"plus","data-index":s,onClick:e.handleIncrementCounter,children:Object(m.jsx)("span",{className:"bi bi-plus"})})})]})}),Object(m.jsx)("div",{className:"label form-check-label",htmlFor:"flexCheckDefault",children:Object(m.jsxs)("div",{className:"intent",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-".concat(v[s])}),t]})})]},s)})),!b&&Object(m.jsx)("div",{className:"error-messasge text-danger",children:r})]})})})})})})]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickBack,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleClickNext,children:Object(m.jsx)("i",{className:"bi bi-chevron-right"})})]})})})]}),Object(m.jsx)("div",{className:"actions float",children:Object(m.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickHelp,children:[Object(m.jsx)("i",{className:"bi bi-life-preserver"}),"Help"]})})]})}}]),s}(c.a.Component),S=s(8),I=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.onClickBack,s=e.onClickNext;return Object(m.jsx)("div",{className:"selections help",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"instruction",children:[Object(m.jsx)("h3",{children:"Highlight the task"}),Object(m.jsx)("p",{className:"instruction body",children:"You are requested to highlight using your mouse the part in your sentence that corresponds with the displayed task. It is likely that you've change the wording or details of the original task - choose the rewritten task in your sentence that stems from that task."})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsx)("div",{className:"vertical-center",children:Object(m.jsxs)("ol",{className:"intents",children:[Object(m.jsx)("li",{className:"intent text-red",children:"Will it snow today"}),Object(m.jsx)("li",{className:"intent text-blue",children:"Set a daily reminder at 6am to exercise"}),Object(m.jsx)("li",{className:"intent text-green",children:"cancel my alarm"})]})})})})]}),Object(m.jsxs)("div",{className:"row mb-5",children:[Object(m.jsx)("div",{className:"col-6",children:Object(m.jsxs)("div",{className:"help-instructions",children:[Object(m.jsx)("h5",{children:"House rules:"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"Selections are not allowed to overlap one another (don't worry we will show you your previous selections)"}),Object(m.jsx)("li",{children:"If you need to adjust your current selection then just try it again"}),Object(m.jsx)("li",{children:"Don't inclulde conjunction words or panctuation marks in your selection"}),Object(m.jsx)("li",{children:"That's the final step, so shout out to you for completing the task"})]})]})}),Object(m.jsx)("div",{className:"col-6",children:Object(m.jsx)("div",{className:"vertical-center-container",children:Object(m.jsx)("div",{className:"vertical-center",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("span",{className:"intent-icon bi bi-mouse2"})})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"intent-textarea",children:["If ",Object(m.jsxs)("span",{className:"highlight text-red",children:["it snows today",Object(m.jsx)("span",{className:"index",children:"(1)"})]})," then ",Object(m.jsxs)("span",{className:"highlight text-green",children:["cancel my alarm",Object(m.jsx)("span",{className:"index",children:"(3)"})]}),", otherwise",Object(m.jsxs)("span",{className:"highlight text-blue",children:["set a daily reminder at 6am to exercise",Object(m.jsx)("span",{className:"index",children:"(2)"})]}),"."]})})})})]})})})})]}),t&&s&&Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:t,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:s,children:Object(m.jsx)("i",{className:"bi bi-check-lg"})})]})})})]})})}}]),s}(c.a.Component),H=(s(68),"intents"),B="constraints",A=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;Object(r.a)(this,s),n=t.call(this,e);var c=e.selectIndex,a=e.step,i=e.intentsSelections,l=e.constraintsSelections,o=e.selectedIntents,h=e.selectedConstraints;return n.state={selectIndex:isNaN(c)?0:-1!==c?c:a===B?h.length-1:o.length-1,step:a,intentsSelections:i||[],constraintsSelections:l||[]},n.handleClickNext=n.handleClickNext.bind(Object(d.a)(n)),n.handleClickBack=n.handleClickBack.bind(Object(d.a)(n)),n.handleClickHelp=n.handleClickHelp.bind(Object(d.a)(n)),n.handleReset=n.handleReset.bind(Object(d.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(d.a)(n)),n}return Object(o.a)(s,[{key:"handleMouseUp",value:function(e){var t=this.state,s=t.selectIndex,n=t.step,c=t.intentsSelections,a=t.constraintsSelections,i=this.getSelection(),l=i.selectionStart,r=i.selectionEnd;this.isSelectionValid({selectionStart:l,selectionEnd:r})?(n===H?c[s]=[l,r]:a[s]=[l,r],this.setState({intentsSelections:c,constraintsSelections:a,errorMessage:null}),this.props.onSelection(c,a,s)):this.setState({errorMessage:"Please select the part in your utterance that corresponds with the ".concat(n===H?"task":"query",". Your selections cannot overlap other selections")})}},{key:"handleClickNext",value:function(e){e.preventDefault();var t=this.props,s=t.selectedIntents,n=t.selectedConstraints,c=this.state,a=c.selectIndex,i=c.step,l=c.intentsSelections,r=c.constraintsSelections;if(i===H&&!l[a]||i===B&&!r[a])this.setState({errorMessage:"Did you forget to select the part in your utterance that corresponds with the ".concat(i===H?"task":"query","?")});else{var o=a+1;i===H&&o<s.length||i===B&&o<n.length?this.setState({selectIndex:o}):n&&n.length>0&&i===H?this.setState({step:B,selectIndex:0}):this.props.onClickNext()}}},{key:"handleClickBack",value:function(e){e.preventDefault();var t=this.props.selectedIntents,s=this.state,n=s.selectIndex,c=s.step,a=n-1;c===H&&a>=0||c===B&&a>=0?this.setState({selectIndex:a}):c===B?this.setState({step:H,selectIndex:t.length-1}):this.props.onClickBack()}},{key:"handleClickHelp",value:function(e){e.preventDefault(),this.setState({showHelp:!0})}},{key:"handleReset",value:function(e){e.preventDefault(),this.setState({intentsSelections:[],selectIndex:0})}},{key:"getSelection",value:function(){var e=this.props.utterance,t=window.getSelection(),s=t.baseOffset,n=t.extentOffset;t.baseNode!==t.extentNode&&(n+=t.baseNode.textContent.length);for(var c=t.baseNode.parentNode,a=c.innerHTML===e?null:c.parentNode;a;){for(var i=a.childNodes[a.childNodes.length-1],l=0;l<a.childNodes.length;l++){a.childNodes[l]===c&&(i=c.previousSibling)}for(;i;)s+=i.textContent.length,n+=i.textContent.length,i=i.previousSibling;a=a.previousSibling}return{selectionStart:s,selectionEnd:n}}},{key:"isSelectionValid",value:function(e){var t=!1,s=this.props,n=s.selectedIntents,c=s.selectedConstraints,a=s.allowOverlaps,i=this.state,l=i.selectIndex,r=i.step,o=i.intentsSelections,d=i.constraintsSelections,h=e.selectionStart,j=e.selectionEnd,b=h>=0&&j>h&&j-h>1,m=a||!n||0===n.length||o.reduce((function(e,t,s){return e&&(!t||r===H&&l===s||h>=t[1]||j<=t[0])}),!0),x=a||!c||0===c.length||d.reduce((function(e,t,s){return e&&(!t||r===B&&l===s||h>=t[1]||j<=t[0])}),!0);return t=t||b&&m&&x}},{key:"render",value:function(){var e=this,t=this.props,s=t.utterance,n=t.intents,c=t.constraintIntents,a=t.selectedIntents,i=t.selectedConstraints,l=t.intentIcons,r=t.constraintIcons,o=(t.onClickHelp,this.state),d=o.selectIndex,h=o.step,j=o.intentsSelections,b=o.constraintsSelections,x=o.errorMessage,u=o.showHelp;i=i||[];var p=h===H?a.length:i.length,O=h===H?n[a[d]]:c[i[d]],v=d<l.length?l[a[d]]:r[i[d]],N=h===H?j[d]?j[d]:[null,null]:b[d]?b[d]:[null,null],k=Object(S.a)(N,2),g=k[0],y=k[1],C=g>=0&&y<=s.length&&y>g?s.substring(g,y):"",w=j.map((function(e,t){return[e,"intent",t]})).concat(b.map((function(e){return[e,"constraint"]}))).filter((function(e){return!!e})).sort((function(e,t){return e[0][0]-t[0][0]}));return u?Object(m.jsx)(f,{show:u,onHide:function(){return e.setState({showHelp:!1})},children:Object(m.jsx)(I,{})}):Object(m.jsxs)("div",{className:"selections",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"instructions-text",children:[Object(m.jsx)("h1",{children:"Highligh text in your sentence"}),Object(m.jsxs)("p",{className:!0,children:["Highlight, with your mouse, the part of text in your sentence that references the following task (",d+1," / ",p,"):"]}),Object(m.jsxs)("div",{className:"required-intent text-center",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-".concat(v)}),O]})]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card mt-4",children:[Object(m.jsx)("div",{className:"card-header text-center",children:Object(m.jsx)("h3",{className:"text-center",children:Object(m.jsx)("span",{className:"intent-icon bi bi-mouse2"})})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("div",{className:"row mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"selection-area",children:Object(m.jsx)("div",{className:"form-control p-3 user-utterance",id:"utterance-selection",onMouseUp:this.handleMouseUp,children:w.length>0?w.map((function(e,t){var n=Object(S.a)(e,3),c=n[0],a=n[1],i=n[2];return Object(m.jsxs)("span",{children:[0===t&&Object(m.jsx)("span",{children:s.substring(0,c[0])}),Object(m.jsx)("span",{className:"highlight ".concat(a," ").concat(d===i?"current":""),children:s.substring(c[0],c[1])}),Object(m.jsx)("span",{children:s.substring(c[1],t+1<w.length?w[t+1][0][0]:s.length)})]},t)})):s})})})}),Object(m.jsx)("div",{className:"row selection mb-3",children:Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)("span",{className:"selection-head",children:"You selected:"}),C&&Object(m.jsx)("span",{className:"selection-text",children:C})]})}),x&&Object(m.jsx)("div",{className:"row selection mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"text-red",children:x})})})]})]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"actions mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickBack,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4",onClick:this.handleReset,children:[Object(m.jsx)("i",{className:"bi bi-arrow-counterclockwise"}),"Reset"]}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleClickNext,children:Object(m.jsx)("i",{className:"bi bi-chevron-right"})})]})})}),Object(m.jsx)("div",{className:"actions float",children:Object(m.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickHelp,children:[Object(m.jsx)("i",{className:"bi bi-life-preserver"}),"Help"]})})]})}}]),s}(c.a.Component),T=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={feedback:""},n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleClickBack=n.handleClickBack.bind(Object(d.a)(n)),n.handleTextAreaChange=n.handleTextAreaChange.bind(Object(d.a)(n)),n}return Object(o.a)(s,[{key:"handleTextAreaChange",value:function(e){var t=this.props.onFeedbackChange,s=e.target.value;this.setState({feedback:s}),t&&t(s)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.feedback;this.props.onSubmit(t)}},{key:"handleClickBack",value:function(e){e.preventDefault(),this.props.onClickBack()}},{key:"render",value:function(){var e=this.state.feedback;return Object(m.jsx)("div",{className:"thank-you",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("h2",{className:"text-muted text-center mb-3",children:"Thank You."})})}),Object(m.jsx)("div",{className:"row mt-3 mb-3",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"card mt-4",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsxs)("h4",{className:"text-center",children:[Object(m.jsx)("span",{className:"intent-icon bi bi-megaphone"}),"Have any feedback?"]})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("form",{className:"g-3 needs-validation pt-1",onSubmit:this.handleSubmit,noValidate:!0,children:Object(m.jsx)("div",{className:"has-validation",children:Object(m.jsx)("textarea",{className:"feedback-textarea form-control mb-3",rows:"3",value:e,type:"text",id:"feedback-text","aria-describedby":"help",onChange:this.handleTextAreaChange,placeholder:"Enter your feedback here...",required:!0})})})})})})]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"mt-4 d-grid gap-2 d-sm-flex justify-content-sm-center",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg px-4 gap-3",onClick:this.handleClickBack,children:Object(m.jsx)("i",{className:"bi bi-chevron-left"})}),Object(m.jsx)("button",{type:"button",className:"btn btn-primary btn-lg px-4",onClick:this.handleSubmit,children:"Finish"})]})})})]})})}}]),s}(c.a.Component),M=(s(69),1),q=2,D=3,U=4,W=5,R=6,E=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var n;Object(r.a)(this,s),n=t.call(this,e);var c=e.intents,a=e.constraints;return n.state={currentScreen:M,intentsSelections:c&&new Array(c.length),constraintsSelections:a&&new Array(a.length),workerResponses:[]},n.handleClickBack=n.handleClickBack.bind(Object(d.a)(n)),n.handleClickNext=n.handleClickNext.bind(Object(d.a)(n)),n.handleClickHelp=n.handleClickHelp.bind(Object(d.a)(n)),n.handleFeedbackChange=n.handleFeedbackChange.bind(Object(d.a)(n)),n.handleUtteranceChange=n.handleUtteranceChange.bind(Object(d.a)(n)),n.handleSelectIntent=n.handleSelectIntent.bind(Object(d.a)(n)),n.handleSelectConstraint=n.handleSelectConstraint.bind(Object(d.a)(n)),n.handleSelection=n.handleSelection.bind(Object(d.a)(n)),n}return Object(o.a)(s,[{key:"submitToMTurk",value:function(){var e=this.props,t=e.intents,s=e.constraints,n=this.state,c=n.workerResponses,a=n.feedback,i=[],l=function(e){var n=c[e],a=n.utterance,l=n.context,r=n.selectedIntents,o=n.selectedConstraints,d=n.intentsSelections,h=n.constraintsSelections,j=r&&r.map((function(e){return t[e]})).join(" | "),b=o&&o.map((function(e){return s[e]})).join(" | "),m=r&&r.map((function(e,t){return a.substring(d[t][0],d[t][1])})).join(" | "),x=o&&o.map((function(e,t){return a.substring(h[t][0],h[t][1])})).join(" | "),u={utterance:a,context:l,intents:j,constraints:b,intentsAnnotations:m,constraintsAnnotations:x};i.push(u)};for(var r in c)l(r);var o=a;document.querySelector("crowd-form").onsubmit=function(){document.getElementById("worker-responses")&&(document.getElementById("worker-responses").value=JSON.stringify(i),document.getElementById("worker-feedback").value=o)},document.querySelector("crowd-form").submit()}},{key:"handleClickNext",value:function(){var e=this.props.maxUtterances,t=this.state,s=t.index,n=t.currentScreen;n===M?this.setState({currentScreen:q}):n===q?this.setState({currentScreen:D,index:0}):n===D?this.setState({currentScreen:s+1===e?R:D,index:s+1}):n===R&&this.submitToMTurk(this.state),window.scrollTo(0,0)}},{key:"handleClickBack",value:function(){var e=this.props.maxUtterances,t=this.state,s=t.currentScreen,n=t.index;s===q?this.setState({currentScreen:M}):s===D?this.setState({index:Math.max(n-1,0),currentScreen:0===n?q:D}):s===R&&this.setState({currentScreen:D,index:e-1}),window.scrollTo(0,0)}},{key:"handleClickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleFeedbackChange",value:function(e){this.setState({feedback:e})}},{key:"handleUtteranceChange",value:function(e,t,s){var n=this.state.workerResponses;n[e]=Object(l.a)(Object(l.a)({},n[e]),{utterance:t,context:s,intentsSelections:[],constraintsSelections:[]}),this.setState({workerResponses:n})}},{key:"handleSelectIntent",value:function(e,t){var s=this.state.workerResponses;s[e]=Object(l.a)(Object(l.a)({},s[e]),{selectedIntents:t,intentsSelections:[]}),this.setState({workerResponses:s})}},{key:"handleSelectConstraint",value:function(e,t){var s=this.state.workerResponses;s[e]=Object(l.a)(Object(l.a)({},s[e]),{selectedConstraints:t,constraintsSelections:[]}),this.setState({workerResponses:s})}},{key:"handleSelection",value:function(e,t,s,n){var c=this.state.workerResponses;c[e]=Object(l.a)(Object(l.a)({},c[e]),{intentsSelections:t,constraintsSelections:s,currentSelectionIndex:n}),this.setState({workerResponses:c})}},{key:"getDisplayedScreen",value:function(){var e=this.props,t=e.maxUtterances,s=e.contexts,n=e.maxLength,c=e.maxLengthPerIntent,a=e.minIntents,i=e.minConstraints,l=e.intents,r=e.constraints,o=e.conjunctionWords,d=e.minConjunctionWords,h=this.state,j=h.currentScreen,b=h.index,u=h.workerResponses,O=u.length>b?u[b]:{},v=O.utterance,N=O.context,f=O.selectedIntents,g=O.selectedConstraints,y=O.intentsSelections,C=O.constraintsSelections,S=O.selectionsStep,I=O.currentSelectionIndex,H=O.verificationStep,B=n||c*l.length||250;return j===M?Object(m.jsx)(x,{onClickExample:this.handleClickHelp,onClickSkip:this.handleClickNext}):j===q?Object(m.jsx)(p,{onClickBack:this.handleClickBack,onClickNext:this.handleClickNext}):j===D?Object(m.jsx)(k,{index:b,maxUtterances:t,utterance:v,utteranceLimit:B,minIntents:a,minConstraints:i,intents:l,constraints:r,conjunctionWords:o,minConjunctionWords:d,contexts:s,context:N,onUtteranceChange:this.handleUtteranceChange,onClickBack:this.handleClickBack,onClickHelp:this.handleClickHelp,onClickNext:this.handleClickNext}):j===W?Object(m.jsx)(w,{index:b,utterance:v,step:H,minIntents:a,minConstraints:i,intents:l,constraints:r,selectedIntents:f,selectedConstraints:g,onSelectIntent:this.handleSelectIntent,onSelectConstraint:this.handleSelectConstraint,onClickNext:this.handleClickNext,onClickBack:this.handleClickBack,onClickHelp:this.handleClickHelp}):j===U?Object(m.jsx)(A,{index:b,utterance:v,intents:l,constraints:r,selectedIntents:f,selectedConstraints:g,intentsSelections:y,constraintsSelections:C,step:S,selectionIndex:I,onSelection:this.handleSelection,onClickNext:this.handleClickNext,onClickBack:this.handleClickBack,onClickHelp:this.handleClickHelp}):j===R?Object(m.jsx)(T,{onFeedbackChange:this.handleFeedbackChange,onSubmit:this.handleClickNext,onClickBack:this.handleClickBack}):void 0}},{key:"render",value:function(){var e=this.getDisplayedScreen();return Object(m.jsx)("div",{className:"utterances",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("main",{children:e})})})}}]),s}(c.a.Component),P=(s(70),function(e){var t=e.id,s=e.maxUtterances,n=e.context,c=e.contexts,a=e.intents,i=e.minIntents,l=e.constraints,r=e.minConstraints,o=e.conjunctionWords,d=e.linkWordIdx,h=e.minConjunctionWords,j=e.quantifiers,b=e.quantifierIdx,x=e.maxLength,u=e.maxLengthPerIntent;return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(E,{id:t,context:n,contexts:c,maxUtterances:s,intents:a,minIntents:i,constraints:l,minConstraints:r,conjunctionWords:o,minConjunctionWords:h,linkWordIdx:d,quantifiers:j,quantifierIdx:b,maxLength:x,maxLengthPerIntent:u})})}),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",s=document.getElementById(t).getAttribute(e);return s&&!s.startsWith("${")?s:null},F=L("data-id"),V=L("data-max-utterances")?parseInt(L("data-max-utterances")):1,Y=L("data-context"),G=L("data-contexts")?L("data-contexts").split("|").map((function(e){return e.trim()})):[],J=(L("data-intents")&&L("data-intents").split("|").filter((function(e){return e&&e.length>0})).map((function(e){return e.trim()})),L("data-intent-icons")&&L("data-intent-icons").split("|").filter((function(e){return e&&e.length>0})).map((function(e){return e.trim()})),L("data-min-intents")&&parseInt(L("data-min-intents"))),z=(L("data-constraints")&&L("data-constraints").split("|").filter((function(e){return e&&e.length>0})).map((function(e){return e.trim()})),L("data-constraint-icons")&&L("data-constraint-icons").split("|").filter((function(e){return e&&e.length>0})).map((function(e){return e.trim()})),L("data-min-constraints")&&parseInt(L("data-min-constraints"))),Z=L("data-conjunction-words")?L("data-conjunction-words").split("|").map((function(e){return{display:e.trim().split(":")[0],verification:e.trim().split(":")[1].split(",")}})):[],Q=L("min-conjunction-words")&&parseInt(L("min-conjunction-words")),$=L("data-quantifiers")?L("data-quantifiers").split("|").map((function(e){return e.trim()})):[],K=L("data-max-length")&&parseInt(L("data-max-length")),X=L("data-max-length-per-intent")&&parseInt(L("data-max-length-per-intent"));i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P,{id:F,context:Y,contexts:G,maxUtterances:V,intents:[{name:"General knowledge",icon:"google"},{name:"Weather",icon:"cloud-sun"},{name:"Reminders",icon:"bookmark"},{name:"Calendar",icon:"calendar-date"},{name:"Events & Tickets",icon:"ticket-perforated"},{name:"Mail",icon:"envelope"},{name:"Messages",icon:"chat"},{name:"Map & Navigation",icon:"truck"},{name:"Shopping",icon:"cart"},{name:"Music & Podcasts",icon:"music-note-beamed"},{name:"Smart Home",icon:"house"},{name:"Health & Nutrition",icon:"heart-pulse"}],minIntents:J,constraints:[],minConstraints:z,conjunctionWords:Z,minConjunctionWords:Q,quantifiers:$,maxLength:K,maxLengthPerIntent:X})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.8ee53e3a.chunk.js.map